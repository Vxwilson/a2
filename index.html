<!DOCTYPE html>
<html>

<!--  ref: https://population.un.org/wpp/Download/Standard/MostUsed/ -->
<!-- ref: https://www.kaggle.com/datasets/yamaerenay/ico-coffee-dataset-worldwide?select=imports.csv -->


<head>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.2.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.20.8"></script>
    <link rel="stylesheet" href="css/styles2.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">

</head>

<body>
    <div class="header">
        <h1>The Worldwide Phenomenon of Coffee</h1>
        <span>
        <h2>Prepared by Pong Vei Xhen 33480982</h2> <h2> Updated October 7, 2024</h2>
        </span>
        <!-- paragraph -->
        <p>As the second most traded commodity in the world, coffee is a global phenomenon. This visualization explores the worldwide production, consumption, and trade of coffee. The data is sourced from the International Coffee Organization (ICO) and the United Nations (UN).</p>
    </div>


    <div class="container">
        <div class="horizontalcontainer">
            <div id="barChartExports" class="vis"></div>
            <!-- <div>
                <h2>Exports of Coffee</h2>
                <p>Exports of coffee in 1000 60kg bags</p>
            </div> -->
            <div id="mapImports" class="vis"></div>
        </div>
        <div class="horizontalcontainer">
            <div id="streamGraphTop5" class="vis"></div>
            <div class="vis spacer50"></div>
        </div>

       
        <div class="horizontalcontainer">
            <div id="lineChartPrices" class="vis"></div>
            <div id="lineChartPriceDiff" class="vis"></div>
        </div>
        <div id="smallMultiplesGrowers" class="vis"></div>
        <div id="smallMultiplesRetail" class="vis"></div>
    </div>
    <script>

        const smallmultiplescheme = ['#00429d', '#2e59a8', '#4771b2', '#5d8abd', '#73a2c6', '#8abccf', '#a5d5d8', '#c5eddf', '#ffdec7', '#ffbcaf', '#ff9895', '#f4777f', '#e4576b', '#cf3759', '#b41648', '#93003a']
        const streamGraphScheme = ['#7c739b', '#a57ca5', '#cc86a4', '#ec939c', '#ffa78f', '#ffc184', '#ffdf84']
        const mapGraphScheme = ['#ffffff00', '#8279a5', '#a57ca5', '#cc86a4', '#ec939c', '#ffa78f', '#ffc184', '#ffdf84']
        const streamGraphScheme2 = ['#ffdf84', '#f9c57b', '#efad76', '#e19672', '#cf8270', '#b96f6d', '#a25f68', '#885062']
        const streamGraphScheme3 = ['#7c739b', '#a57ca5', '#cc86a4', '#ec939c', '#ffa78f', '#ffc184', '#ffdf84', '#f9c57b', '#efad76', '#e19672', '#cf8270', '#b96f6d', '#a25f68', '#885062']
        const lineChartScheme = ['#596988', '#a57ca5', '#ec939c', '#ffa78f', '#ffc184', '#ffdf84']
        const blueHueScheme = ['#c1e7ff', '#a7cfe9', '#8eb8d3', '#75a1be', '#5d8ba9', '#437594', '#296080', '#004c6d']
        const coffeeScheme = ['#fff6df', '#f4e6cd', '#e9d6bb', '#dfc6aa', '#d5b699', '#cba78a', '#c2977b', '#c2977b', '#c2977b', '#b8876e', '#b8876e', '#b8876e', '#b8876e', '#b8876e', '#b8876e', '#b8876e', '#b8876e', '#b8876e']
        const blueyellowScheme = ['#003f5c', '#2f4b7c', '#665191', '#a05195', '#d45087', '#f95d6a', '#ff7c43', '#ffa600']
        const blueyellowScheme2 = ['#003f5c', '#7a5195', '#ef5675', '#ffa600']
        const greenScheme = ['#5d7e9c', '#6098b3', '#65b2c5', '#72ccd2', '#89e6db', '#aaffdf']


        const sharedParam = {
            "name": "yearSelection",
            "value": 1990,
            "bind": {
                "input": "range",
                "min": 1990,
                "max": 2018,
                "step": 1,
                "name": "Year:"
            }
        };

        // use fetch to load the config.json file to be used in the vegaEmbed
        fetch('json/config.json')
            .then(response => response.json())
            .then(configData => {
                // fetch bar chart data 
                fetch('json/barChartExports.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        spec.params = [sharedParam];
                        vegaEmbed("#barChartExports", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });

                // fetch map data
                fetch('json/mapImports.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        spec.params = [sharedParam];
                        vegaEmbed("#mapImports", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });

                // fetch stream graph data
                fetch('json/streamGraphTop5Prod.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        vegaEmbed("#streamGraphTop5", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });

                // fetch line chart data
                fetch('json/lineChartPrice.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        vegaEmbed("#lineChartPrices", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });

                // fetch line chart data
                fetch('json/lineChartPriceDiff.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        vegaEmbed("#lineChartPriceDiff", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });

                // fetch small multiples data
                fetch('json/horizonChartGrowers.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        vegaEmbed("#smallMultiplesGrowers", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });

                // fetch small multiples data
                fetch('json/smallMulRetail.json')
                    .then(response => response.json())
                    .then(spec => {
                        // Now configData contains the parsed JSON object
                        vegaEmbed("#smallMultiplesRetail", spec, {
                            mode: "vega-lite",
                            renderer: "svg",
                            actions: false,
                            config: configData
                        })
                            .then(console.log)
                            .catch(console.warn);
                    });
            });
    </script>
</body>

</html>